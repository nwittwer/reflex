{"version":3,"sources":["webpack://electronPlaywrightBrowserInstaller/webpack/universalModuleDefinition","webpack://electronPlaywrightBrowserInstaller/./src/index.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/emitter.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/index.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/install/browserFetcher.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/install/installer.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/utils/browserPaths.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/utils/ubuntuVersion.js","webpack://electronPlaywrightBrowserInstaller/./src/lib/utils/utils.js","webpack://electronPlaywrightBrowserInstaller/external \"child_process\"","webpack://electronPlaywrightBrowserInstaller/external \"console-browserify\"","webpack://electronPlaywrightBrowserInstaller/external \"crypto\"","webpack://electronPlaywrightBrowserInstaller/external \"events\"","webpack://electronPlaywrightBrowserInstaller/external \"extract-zip\"","webpack://electronPlaywrightBrowserInstaller/external \"fs\"","webpack://electronPlaywrightBrowserInstaller/external \"http\"","webpack://electronPlaywrightBrowserInstaller/external \"https\"","webpack://electronPlaywrightBrowserInstaller/external \"https-proxy-agent\"","webpack://electronPlaywrightBrowserInstaller/external \"os\"","webpack://electronPlaywrightBrowserInstaller/external \"path\"","webpack://electronPlaywrightBrowserInstaller/external \"playwright-core\"","webpack://electronPlaywrightBrowserInstaller/external \"process/browser\"","webpack://electronPlaywrightBrowserInstaller/external \"progress\"","webpack://electronPlaywrightBrowserInstaller/external \"proper-lockfile\"","webpack://electronPlaywrightBrowserInstaller/external \"proxy-from-env\"","webpack://electronPlaywrightBrowserInstaller/external \"rimraf\"","webpack://electronPlaywrightBrowserInstaller/external \"url\"","webpack://electronPlaywrightBrowserInstaller/external \"util\"","webpack://electronPlaywrightBrowserInstaller/webpack/bootstrap","webpack://electronPlaywrightBrowserInstaller/webpack/runtime/compat get default export","webpack://electronPlaywrightBrowserInstaller/webpack/runtime/define property getters","webpack://electronPlaywrightBrowserInstaller/webpack/runtime/hasOwnProperty shorthand","webpack://electronPlaywrightBrowserInstaller/webpack/runtime/make namespace object","webpack://electronPlaywrightBrowserInstaller/webpack/startup"],"names":["EventEmitter","require","downloadEmitter","on","current","total","name","msg","console","log","packageName","logTypes","generator","type","old","Array","prototype","unshift","call","arguments","toUpperCase","apply","map","installBrowsersWithProgressBar","Installer","options","browsers","isInstalled","checkIfInstalled","install","checkInstallDir","results","ls","path","__dirname","every","v","find","x","includes","error","length","catch","err","stack","browser","playwright","executablePath","tempArr","dir","fs","dirent","push","getPackagedPlaywrightExecPath","replaceAll","str","mapObj","re","RegExp","Object","keys","join","replace","matched","toLowerCase","initialPath","updatedPath","value","exports","logPolitely","downloadBrowserWithProgressBar","os","URL","util","ProgressBar","proxy_from_env_1","extract","ProxyAgent","browserPaths","utils_1","unlinkAsync","promisify","unlink","bind","chmodAsync","chmod","existsAsync","Promise","resolve","stat","CHROMIUM_MOVE_TO_AZURE_CDN_REVISION","getDownloadHost","browserName","revision","defaultDownloadHost","envDownloadHost","chromium","firefox","webkit","getFromENV","getDownloadUrl","platform","Map","get","FIREFOX_NORMALIZE_CDN_NAMES_REVISION","WEBKIT_NORMALIZE_CDN_NAMES_REVISION","undefined","revisionURL","hostPlatform","parseInt","serverHost","urlTemplate","assert","format","browsersPath","browserPath","browserDirectory","progressBarName","lastDownloadedBytes","progress","downloadedBytes","totalBytes","delta","toMegabytes","finalMsg","url","zipPath","tmpdir","downloadFile","e","process","exitCode","bytes","mb","Math","round","destinationPath","progressCallback","fulfill","reject","promise","y","request","httpRequest","response","statusCode","Error","resume","file","createWriteStream","pipe","headers","onData","chunk","method","parse","proxyURL","getProxyForUrl","startsWith","proxy","href","host","hostname","port","parsedProxyURL","secureProxy","protocol","agent","rejectUnauthorized","requestCallback","res","location","end","toBeLogged","logLevel","env","npm_config_loglevel","logLevelDisplay","crypto","removeFolder","lockfile","browserFetcher","fsMkdirAsync","mkdir","fsReaddirAsync","readdir","fsReadFileAsync","readFile","fsExistsAsync","filePath","then","fsUnlinkAsync","fsWriteFileAsync","writeFile","removeFolderAsync","packagePath","getAsBooleanFromENV","recursive","lockfilePath","releaseLock","lock","retries","factor","onCompromised","message","linksDir","sha1","validateCache","usedBrowserPaths","Set","fileName","linkPath","linkTarget","toString","browsersToDownload","readBrowsersToDownload","usedBrowserPath","browserRevision","shouldHaveMarkerFile","markerFilePath","add","downloadedBrowsers","filter","isBrowserDirectory","directories","delete","directory","myBrowsersToDownload","JSON","download","data","sum","createHash","update","digest","child_process_1","ubuntuVersion_1","macVersion","execSync","stdio","trim","split","slice","arm64","archSuffix","ubuntuVersion","getUbuntuVersionSync","arch","linuxLddDirectories","windowsExeAndDllDirectories","tokens","cacheDirectory","XDG_CACHE_HOME","homedir","LOCALAPPDATA","defaultBrowsersPath","envDefined","baseName","basename","readFileAsync","getUbuntuVersion","osReleaseText","getUbuntuVersionInternal","readFileSync","fields","line","shift","endsWith","substring","set","mkdirAsync","makeWaitForNextTask","versions","node","setImmediate","spinning","callbacks","loop","callback","debugAssert","isUnderTest","isString","obj","String","isRegExp","isObject","isError","__proto__","isInDebugMode","isDebugMode","_isUnderTest","setUnderTest","mkdirIfNeeded","dirname","headersObjectToArray","result","is","headersArrayToObject","lowerCase","monotonicTime","seconds","nanoseconds","hrtime","calculateSha1","buffer","hash","createGuid","randomBytes"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"electronPlaywrightBrowserInstaller\"] = factory();\n\telse\n\t\troot[\"electronPlaywrightBrowserInstaller\"] = factory();\n})(this, function() {\nreturn ","'use strict'\n\n// import \"core-js/stable\";\n// import \"regenerator-runtime/runtime\";\n\n// Import\nimport { Installer, getPackagedPlaywrightExecPath } from './lib/index.js'\n\n// Export the default (Installer class)\nexport { Installer, getPackagedPlaywrightExecPath }\n","/**\n * Event emitter\n * This allows us to expose the download progress\n * See: lib/install/browserFetcher.js\n */\nconst { EventEmitter } = require('events')\nexport const downloadEmitter = new EventEmitter()\n\n/**\n * Here's an example\n */\n\n// Listen to progress events\ndownloadEmitter.on('progress', ({ current, total, name }) => {\n  const msg = `Downloading ${name} - ${current}/${total}`\n  console.log(msg)\n})\n\ndownloadEmitter.on('done', () => {\n  // Function here\n})\n\nexport default downloadEmitter\n","import { promises as fs } from 'fs'\nimport path from 'path'\nimport playwright from 'playwright-core'\n\n// We'll prepend console.log messages for this library\n// via https://stackoverflow.com/a/16259739/1114901\n/**\n * Attach to the EventEmitter\n * This allows us to stream the download progress\n */\nimport { downloadEmitter } from './emitter'\n\n// import \"core-js/stable\";\n// import \"regenerator-runtime/runtime\";\n\nconst packageName = 'electron-playwright-browser-installer'\n\nconst logTypes = ['log', 'error', 'info', 'warn']\nif (console.log) {\n  const generator = (type) => {\n    const old = console[type]\n    console[type] = function () {\n      Array.prototype.unshift.call(arguments, `${packageName.toUpperCase()}:`)\n      old.apply(this, arguments)\n    }\n  }\n  // Apply to each type of console\n  logTypes.map(generator)\n}\n\n/**\n * This file exposes a class interface for\n * displaying the browser installation progress\n */\nconst { installBrowsersWithProgressBar } = require('./install/installer')\n\nexport class Installer {\n  constructor(options = {}) {\n    options = options || {}\n    this.browsers = options.browsers || ['chromium', 'firefox', 'webkit']\n  }\n\n  async run() {\n    const isInstalled = await this.checkIfInstalled()\n\n    if (isInstalled) {\n      console.log('Browsers are installed.')\n    } else {\n      // Not installed yet\n      console.log('Browsers are NOT installed. Attempting to install...')\n      await this.install()\n    }\n  }\n\n  async checkIfInstalled() {\n    // Check for installed browsers in a directory\n    console.log('Checking if browsers are installed...')\n\n    // Verify that there is a directory for each of the browsers\n    const checkInstallDir = async () => {\n      // List of files/folders at path in user's filesystem\n      const results = await ls(path.join(__dirname, '/.local-browsers'))\n      console.log('Found at install directory:', results)\n      if (!results) return false // Case: no folders/files found at directory\n\n      // Validation\n      return this.browsers.every((v) => results.find((x) => x.includes(v)))\n    }\n\n    const isInstalled = (await checkInstallDir()) === true\n\n    if (isInstalled) {\n      console.log('Browsers are installed.')\n      return true\n    } else {\n      console.error('Browsers are NOT installed!')\n      return false\n    }\n  }\n\n  async install(\n    options = {\n      browsers: this.browsers,\n    }\n  ) {\n    // Require browers to be defined\n    if (!options.browsers.length) {\n      console.error(\n        `No browsers were passed in to install. Setting defaults: ${this.browsers}`\n      )\n      return false\n    }\n\n    // Start listening for download events\n    // Listen to progress events\n    downloadEmitter.on('progress', ({ current, total, name }) => {\n      const msg = `Downloading ${name} - ${current}/${total}`\n      console.log(msg)\n    })\n\n    downloadEmitter.on('done', async () => {\n      // Function here\n      // console.log(`It's done downloading!`);\n    })\n\n    // Example via Playwright's Github Installer\n    // https://github.com/microsoft/playwright/blob/master/install-from-github.js#L29\n    await installBrowsersWithProgressBar(__dirname).catch((err) => {\n      console.error(`Failed to install browsers, caused by\\n${err.stack}`)\n      // process.exit(1)\n    })\n\n    // Inform about the installation paths\n    if (options.browsers.length >= 1) {\n      console.log(\n        'Browser paths:',\n        options.browsers.map((browser) => playwright[browser].executablePath())\n      )\n    }\n\n    // Final check\n    return this.checkIfInstalled()\n  }\n}\n\n// Find all files & folders at a path\n// https://stackoverflow.com/a/59042581/1114901\nasync function ls(path) {\n  try {\n    const tempArr = []\n    const dir = await fs.opendir(path) // Opens a stream https://nodejs.org/api/fs.html#fs_class_fs_dir\n\n    for await (const dirent of dir) {\n      tempArr.push(dirent.name)\n    }\n\n    return tempArr // return all the files & directories at the output dir\n  } catch (err) {\n    console.error(err)\n    return false\n  }\n}\n\n// Amend the Playwright executable path when packaged\n// via https://github.com/puppeteer/puppeteer/issues/2134#issuecomment-408221446\nexport function getPackagedPlaywrightExecPath(browser) {\n  if (!browser) console.error('No browser name given.')\n\n  function replaceAll(str, mapObj) {\n    const re = new RegExp(Object.keys(mapObj).join('|'), 'gi')\n\n    return str.replace(re, function (matched) {\n      return mapObj[matched.toLowerCase()]\n    })\n  }\n\n  const mapObj = {\n    playwright: 'electron-playwright-browser-installer',\n    'app.asar': 'app.asar.unpacked',\n  }\n\n  // Generate the correct paths\n  const initialPath = playwright[browser].executablePath()\n  const updatedPath = replaceAll(initialPath, mapObj)\n  console.log(\n    'Is the path the same as initially?',\n    initialPath === updatedPath,\n    `Changed to: ${updatedPath}`\n  )\n\n  return updatedPath\n}\n\n// Export the default (Installer class)\n// export default {\n//   Installer,\n//   getPackagedPlaywrightExecPath,\n// };\n","/**\n * Attach to the EventEmitter\n * This allows us to stream the download progress\n */\nimport { downloadEmitter } from '../emitter'\n;('use strict')\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, '__esModule', { value: true })\nexports.logPolitely = exports.downloadBrowserWithProgressBar = void 0\n\nconst fs = require('fs')\nconst os = require('os')\nconst path = require('path')\nconst URL = require('url')\nconst util = require('util')\nconst ProgressBar = require('progress')\nconst proxy_from_env_1 = require('proxy-from-env')\nconst extract = require('extract-zip')\nconst ProxyAgent = require('https-proxy-agent')\nconst browserPaths = require('../utils/browserPaths')\n// `https-proxy-agent` v5 is written in Typescript and exposes generated types.\n// However, as of June 2020, its types are generated with tsconfig that enables\n// `esModuleInterop` option.\n//\n// As a result, we can't depend on the package unless we enable the option\n// for our codebase. Instead of doing this, we abuse \"require\" to import module\n// without types.\nconst utils_1 = require('../utils/utils')\nconst unlinkAsync = util.promisify(fs.unlink.bind(fs))\nconst chmodAsync = util.promisify(fs.chmod.bind(fs))\nconst existsAsync = (path) =>\n  new Promise((resolve) => fs.stat(path, (err) => resolve(!err)))\nconst CHROMIUM_MOVE_TO_AZURE_CDN_REVISION = 792639\nfunction getDownloadHost(browserName, revision) {\n  // Only old chromium revisions are downloaded from gbucket.\n  const defaultDownloadHost =\n    browserName === 'chromium' && revision < CHROMIUM_MOVE_TO_AZURE_CDN_REVISION\n      ? 'https://storage.googleapis.com'\n      : 'https://playwright.azureedge.net'\n  const envDownloadHost = {\n    chromium: 'PLAYWRIGHT_CHROMIUM_DOWNLOAD_HOST',\n    firefox: 'PLAYWRIGHT_FIREFOX_DOWNLOAD_HOST',\n    webkit: 'PLAYWRIGHT_WEBKIT_DOWNLOAD_HOST',\n  }\n  return (\n    utils_1.getFromENV(envDownloadHost[browserName]) ||\n    utils_1.getFromENV('PLAYWRIGHT_DOWNLOAD_HOST') ||\n    defaultDownloadHost\n  )\n}\nfunction getDownloadUrl(browserName, revision, platform) {\n  if (browserName === 'chromium') {\n    return revision < CHROMIUM_MOVE_TO_AZURE_CDN_REVISION\n      ? new Map([\n          [\n            'ubuntu18.04',\n            '%s/chromium-browser-snapshots/Linux_x64/%d/chrome-linux.zip',\n          ],\n          [\n            'ubuntu20.04',\n            '%s/chromium-browser-snapshots/Linux_x64/%d/chrome-linux.zip',\n          ],\n          ['mac10.13', '%s/chromium-browser-snapshots/Mac/%d/chrome-mac.zip'],\n          ['mac10.14', '%s/chromium-browser-snapshots/Mac/%d/chrome-mac.zip'],\n          ['mac10.15', '%s/chromium-browser-snapshots/Mac/%d/chrome-mac.zip'],\n          ['mac11.0', '%s/chromium-browser-snapshots/Mac/%d/chrome-mac.zip'],\n          ['mac11.1', '%s/chromium-browser-snapshots/Mac/%d/chrome-mac.zip'],\n          ['win32', '%s/chromium-browser-snapshots/Win/%d/chrome-win.zip'],\n          ['win64', '%s/chromium-browser-snapshots/Win_x64/%d/chrome-win.zip'],\n        ]).get(platform)\n      : new Map([\n          ['ubuntu18.04', '%s/builds/chromium/%s/chromium-linux.zip'],\n          ['ubuntu20.04', '%s/builds/chromium/%s/chromium-linux.zip'],\n          ['mac10.13', '%s/builds/chromium/%s/chromium-mac.zip'],\n          ['mac10.14', '%s/builds/chromium/%s/chromium-mac.zip'],\n          ['mac10.15', '%s/builds/chromium/%s/chromium-mac.zip'],\n          ['mac11.0', '%s/builds/chromium/%s/chromium-mac.zip'],\n          ['mac11.0-arm64', '%s/builds/chromium/%s/chromium-mac-arm64.zip'],\n          ['mac11.1', '%s/builds/chromium/%s/chromium-mac.zip'],\n          ['mac11.1-arm64', '%s/builds/chromium/%s/chromium-mac-arm64.zip'],\n          ['win32', '%s/builds/chromium/%s/chromium-win32.zip'],\n          ['win64', '%s/builds/chromium/%s/chromium-win64.zip'],\n        ]).get(platform)\n  }\n  if (browserName === 'firefox') {\n    const FIREFOX_NORMALIZE_CDN_NAMES_REVISION = 1140\n    return revision < FIREFOX_NORMALIZE_CDN_NAMES_REVISION\n      ? new Map([\n          ['ubuntu18.04', '%s/builds/firefox/%s/firefox-linux.zip'],\n          ['ubuntu20.04', '%s/builds/firefox/%s/firefox-linux.zip'],\n          ['mac10.13', '%s/builds/firefox/%s/firefox-mac.zip'],\n          ['mac10.14', '%s/builds/firefox/%s/firefox-mac.zip'],\n          ['mac10.15', '%s/builds/firefox/%s/firefox-mac.zip'],\n          ['mac11.0', '%s/builds/firefox/%s/firefox-mac.zip'],\n          ['mac11.1', '%s/builds/firefox/%s/firefox-mac.zip'],\n          ['win32', '%s/builds/firefox/%s/firefox-win32.zip'],\n          ['win64', '%s/builds/firefox/%s/firefox-win64.zip'],\n        ]).get(platform)\n      : new Map([\n          ['ubuntu18.04', '%s/builds/firefox/%s/firefox-ubuntu-18.04.zip'],\n          ['ubuntu20.04', '%s/builds/firefox/%s/firefox-ubuntu-18.04.zip'],\n          ['mac10.13', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['mac10.14', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['mac10.15', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['mac11.0', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['mac11.0-arm64', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['mac11.1', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['mac11.1-arm64', '%s/builds/firefox/%s/firefox-mac-10.14.zip'],\n          ['win32', '%s/builds/firefox/%s/firefox-win32.zip'],\n          ['win64', '%s/builds/firefox/%s/firefox-win64.zip'],\n        ]).get(platform)\n  }\n  if (browserName === 'webkit') {\n    const WEBKIT_NORMALIZE_CDN_NAMES_REVISION = 1317\n    return revision < WEBKIT_NORMALIZE_CDN_NAMES_REVISION\n      ? new Map([\n          ['ubuntu18.04', '%s/builds/webkit/%s/minibrowser-gtk-wpe.zip'],\n          ['ubuntu20.04', '%s/builds/webkit/%s/minibrowser-gtk-wpe.zip'],\n          ['mac10.13', undefined],\n          ['mac10.14', '%s/builds/webkit/%s/minibrowser-mac-10.14.zip'],\n          ['mac10.15', '%s/builds/webkit/%s/minibrowser-mac-10.15.zip'],\n          ['mac11.0', '%s/builds/webkit/%s/minibrowser-mac-10.15.zip'],\n          ['mac11.1', '%s/builds/webkit/%s/minibrowser-mac-10.15.zip'],\n          ['win32', '%s/builds/webkit/%s/minibrowser-win64.zip'],\n          ['win64', '%s/builds/webkit/%s/minibrowser-win64.zip'],\n        ]).get(platform)\n      : new Map([\n          ['ubuntu18.04', '%s/builds/webkit/%s/webkit-ubuntu-18.04.zip'],\n          ['ubuntu20.04', '%s/builds/webkit/%s/webkit-ubuntu-20.04.zip'],\n          ['mac10.13', undefined],\n          ['mac10.14', '%s/builds/webkit/%s/webkit-mac-10.14.zip'],\n          ['mac10.15', '%s/builds/webkit/%s/webkit-mac-10.15.zip'],\n          ['mac11.0', '%s/builds/webkit/%s/webkit-mac-10.15.zip'],\n          ['mac11.0-arm64', '%s/builds/webkit/%s/webkit-mac-11.0-arm64.zip'],\n          ['mac11.1', '%s/builds/webkit/%s/webkit-mac-10.15.zip'],\n          ['mac11.1-arm64', '%s/builds/webkit/%s/webkit-mac-11.0-arm64.zip'],\n          ['win32', '%s/builds/webkit/%s/webkit-win64.zip'],\n          ['win64', '%s/builds/webkit/%s/webkit-win64.zip'],\n        ]).get(platform)\n  }\n}\nfunction revisionURL(browser, platform = browserPaths.hostPlatform) {\n  const revision = parseInt(browser.revision, 10)\n  const serverHost = getDownloadHost(browser.name, revision)\n  const urlTemplate = getDownloadUrl(browser.name, revision, platform)\n  utils_1.assert(\n    urlTemplate,\n    `ERROR: Playwright does not support ${browser.name} on ${platform}`\n  )\n  return util.format(urlTemplate, serverHost, browser.revision)\n}\n\nexport async function downloadBrowserWithProgressBar(browsersPath, browser) {\n  const browserPath = browserPaths.browserDirectory(browsersPath, browser)\n  const progressBarName = `${browser.name} v${browser.revision}`\n  if (await existsAsync(browserPath)) {\n    // Already downloaded.\n    return false\n  }\n  // let progressBar\n  const lastDownloadedBytes = 0\n  function progress(downloadedBytes, totalBytes) {\n    const delta = downloadedBytes - lastDownloadedBytes\n    // if (!progressBar) {\n    //   progressBar = new ProgressBar(\n    //     `Downloading ${progressBarName} - ${toMegabytes(\n    //       totalBytes\n    //     )} [:bar] :percent :etas `,\n    //     {\n    //       complete: \"=\",\n    //       incomplete: \" \",\n    //       width: 20,\n    //       total: totalBytes,\n    //     }\n    //   );\n    // }\n    // lastDownloadedBytes = downloadedBytes;\n    // progressBar.tick(delta);\n\n    // Emit the progress\n    // This function is called whenever there's new bytes downloaded\n    downloadEmitter.emit('progress', {\n      name: progressBarName,\n      delta,\n      current: toMegabytes(downloadedBytes),\n      total: toMegabytes(totalBytes),\n    })\n\n    // Done!\n    if (downloadedBytes === totalBytes) {\n      const finalMsg = `${progressBarName} installed.`\n      downloadEmitter.emit('done', finalMsg)\n      console.log(finalMsg)\n    }\n  }\n  const url = revisionURL(browser)\n  const zipPath = path.join(\n    os.tmpdir(),\n    `playwright-download-${browser.name}-${browserPaths.hostPlatform}-${browser.revision}.zip`\n  )\n  try {\n    await downloadFile(url, zipPath, progress)\n    await extract(zipPath, { dir: browserPath })\n    await chmodAsync(browserPaths.executablePath(browserPath, browser), 0o755)\n  } catch (e) {\n    process.exitCode = 1\n    throw e\n  } finally {\n    if (await existsAsync(zipPath)) await unlinkAsync(zipPath)\n  }\n  logPolitely(`${progressBarName} downloaded to ${browserPath}`)\n  return true\n}\n// exports.downloadBrowserWithProgressBar = downloadBrowserWithProgressBar;\n\nfunction toMegabytes(bytes) {\n  const mb = bytes / 1024 / 1024\n  return `${Math.round(mb * 10) / 10} Mb`\n}\nfunction downloadFile(url, destinationPath, progressCallback) {\n  let fulfill = () => {}\n  let reject = () => {}\n  let downloadedBytes = 0\n  let totalBytes = 0\n  const promise = new Promise((x, y) => {\n    fulfill = x\n    reject = y\n  })\n  const request = httpRequest(url, 'GET', (response) => {\n    if (response.statusCode !== 200) {\n      const error = new Error(\n        `Download failed: server returned code ${response.statusCode}. URL: ${url}`\n      )\n      // consume response data to free up memory\n      response.resume()\n      reject(error)\n      return\n    }\n    const file = fs.createWriteStream(destinationPath)\n    file.on('finish', () => fulfill())\n    file.on('error', (error) => reject(error))\n    response.pipe(file)\n    totalBytes = parseInt(response.headers['content-length'], 10)\n    if (progressCallback) response.on('data', onData)\n  })\n  request.on('error', (error) => reject(error))\n  return promise\n  function onData(chunk) {\n    downloadedBytes += chunk.length\n    progressCallback(downloadedBytes, totalBytes)\n  }\n}\nfunction httpRequest(url, method, response) {\n  let options = URL.parse(url)\n  options.method = method\n  const proxyURL = proxy_from_env_1.getProxyForUrl(url)\n  if (proxyURL) {\n    if (url.startsWith('http:')) {\n      const proxy = URL.parse(proxyURL)\n      options = {\n        path: options.href,\n        host: proxy.hostname,\n        port: proxy.port,\n      }\n    } else {\n      const parsedProxyURL = URL.parse(proxyURL)\n      parsedProxyURL.secureProxy = parsedProxyURL.protocol === 'https:'\n      options.agent = new ProxyAgent(parsedProxyURL)\n      options.rejectUnauthorized = false\n    }\n  }\n  const requestCallback = (res) => {\n    if (res.statusCode >= 300 && res.statusCode < 400 && res.headers.location)\n      httpRequest(res.headers.location, method, response)\n    else response(res)\n  }\n  const request =\n    options.protocol === 'https:'\n      ? require('https').request(options, requestCallback)\n      : require('http').request(options, requestCallback)\n  request.end()\n  return request\n}\n\nexport function logPolitely(toBeLogged) {\n  const logLevel = process.env.npm_config_loglevel\n  const logLevelDisplay = ['silent', 'error', 'warn'].includes(logLevel || '')\n  if (!logLevelDisplay) console.log(toBeLogged) // eslint-disable-line no-console\n}\n// exports.logPolitely = logPolitely;\n// # sourceMappingURL=browserFetcher.js.map\n","'use strict'\n/**\n * Copyright Microsoft Corporation. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, '__esModule', { value: true })\n// exports.installBrowsersWithProgressBar = void 0;\nconst crypto = require('crypto')\nconst fs = require('fs')\nconst path = require('path')\nconst util = require('util')\nconst removeFolder = require('rimraf')\nconst lockfile = require('proper-lockfile')\nconst browserPaths = require('../utils/browserPaths')\nconst utils_1 = require('../utils/utils')\nconst browserFetcher = require('./browserFetcher')\nconst fsMkdirAsync = util.promisify(fs.mkdir.bind(fs))\nconst fsReaddirAsync = util.promisify(fs.readdir.bind(fs))\nconst fsReadFileAsync = util.promisify(fs.readFile.bind(fs))\nconst fsExistsAsync = (filePath) =>\n  fsReadFileAsync(filePath)\n    .then(() => true)\n    .catch((e) => false)\nconst fsUnlinkAsync = util.promisify(fs.unlink.bind(fs))\nconst fsWriteFileAsync = util.promisify(fs.writeFile.bind(fs))\nconst removeFolderAsync = util.promisify(removeFolder)\n\nexport async function installBrowsersWithProgressBar(packagePath) {\n  // PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD should have a value of 0 or 1\n  if (process.env.PLAYWRIGHT_BROWSERS_PATH === 0) {\n    browserFetcher.logPolitely(\n      `Browser installation path set to hermetic, because 'PLAYWRIGHT_BROWSERS_PATH' env variable is set to ${process.env.PLAYWRIGHT_BROWSERS_PATH}`\n    )\n  } else {\n    browserFetcher.logPolitely(\n      `WARNING: Browser installation path set to default. 'PLAYWRIGHT_BROWSERS_PATH' env var was ${process.env.PLAYWRIGHT_BROWSERS_PATH}.`\n    )\n  }\n\n  // PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD should have a value of 0 or 1\n  if (utils_1.getAsBooleanFromENV('PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD')) {\n    browserFetcher.logPolitely(\n      'Skipping browsers download because `PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD` env variable is set'\n    )\n    return false\n  }\n  const browsersPath = browserPaths.browsersPath(packagePath)\n  await fsMkdirAsync(browsersPath, { recursive: true })\n  const lockfilePath = path.join(browsersPath, '__dirlock')\n  const releaseLock = await lockfile.lock(browsersPath, {\n    retries: {\n      retries: 10,\n      // Retry 20 times during 10 minutes with\n      // exponential back-off.\n      // See documentation at: https://www.npmjs.com/package/retry#retrytimeoutsoptions\n      factor: 1.27579,\n    },\n    onCompromised: (err) => {\n      throw new Error(`${err.message} Path: ${lockfilePath}`)\n    },\n    lockfilePath,\n  })\n  const linksDir = path.join(browsersPath, '.links')\n  await fsMkdirAsync(linksDir, { recursive: true })\n  await fsWriteFileAsync(path.join(linksDir, sha1(packagePath)), packagePath)\n  await validateCache(packagePath, browsersPath, linksDir)\n  await releaseLock()\n}\n// exports.installBrowsersWithProgressBar = installBrowsersWithProgressBar;\n\nexport async function validateCache(packagePath, browsersPath, linksDir) {\n  // 1. Collect used downloads and package descriptors.\n  const usedBrowserPaths = new Set()\n  for (const fileName of await fsReaddirAsync(linksDir)) {\n    const linkPath = path.join(linksDir, fileName)\n    let linkTarget = ''\n    try {\n      linkTarget = (await fsReadFileAsync(linkPath)).toString()\n      const browsersToDownload = await readBrowsersToDownload(linkTarget)\n      for (const browser of browsersToDownload) {\n        const usedBrowserPath = browserPaths.browserDirectory(\n          browsersPath,\n          browser\n        )\n        const browserRevision = parseInt(browser.revision, 10)\n        // Old browser installations don't have marker file.\n        const shouldHaveMarkerFile =\n          (browser.name === 'chromium' && browserRevision >= 786218) ||\n          (browser.name === 'firefox' && browserRevision >= 1128) ||\n          (browser.name === 'webkit' && browserRevision >= 1307)\n        if (\n          !shouldHaveMarkerFile ||\n          (await fsExistsAsync(\n            browserPaths.markerFilePath(browsersPath, browser)\n          ))\n        )\n          usedBrowserPaths.add(usedBrowserPath)\n      }\n    } catch (e) {\n      if (linkTarget)\n        browserFetcher.logPolitely(\n          'Failed to process descriptor at ' + linkTarget\n        )\n      await fsUnlinkAsync(linkPath).catch((e) => {})\n    }\n  }\n  // 2. Delete all unused browsers.\n  let downloadedBrowsers = (await fsReaddirAsync(browsersPath)).map((file) =>\n    path.join(browsersPath, file)\n  )\n  downloadedBrowsers = downloadedBrowsers.filter((file) =>\n    browserPaths.isBrowserDirectory(file)\n  )\n  const directories = new Set(downloadedBrowsers)\n  for (const browserPath of usedBrowserPaths) directories.delete(browserPath)\n  for (const directory of directories) {\n    browserFetcher.logPolitely('Removing unused browser at ' + directory)\n    await removeFolderAsync(directory).catch((e) => {})\n  }\n  // 3. Install missing browsers for this package.\n  const myBrowsersToDownload = await readBrowsersToDownload(packagePath)\n  for (const browser of myBrowsersToDownload) {\n    await browserFetcher.downloadBrowserWithProgressBar(browsersPath, browser)\n    await fsWriteFileAsync(\n      browserPaths.markerFilePath(browsersPath, browser),\n      ''\n    )\n  }\n}\n\nexport async function readBrowsersToDownload(packagePath) {\n  const browsers = JSON.parse(\n    (await fsReadFileAsync(path.join(packagePath, 'browsers.json'))).toString()\n  ).browsers\n  // Older versions do not have \"download\" field. We assume they need all browsers\n  // from the list. So we want to skip all browsers that are explicitly marked as \"download: false\".\n  return browsers.filter((browser) => browser.download !== false)\n}\nfunction sha1(data) {\n  const sum = crypto.createHash('sha1')\n  sum.update(data)\n  return sum.digest('hex')\n}\n// # sourceMappingURL=installer.js.map\n","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBrowserDirectory = exports.markerFilePath = exports.browserDirectory = exports.browsersPath = exports.executablePath = exports.windowsExeAndDllDirectories = exports.linuxLddDirectories = exports.hostPlatform = void 0;\nconst child_process_1 = require(\"child_process\");\nconst os = require(\"os\");\nconst path = require(\"path\");\nconst ubuntuVersion_1 = require(\"./ubuntuVersion\");\nconst utils_1 = require(\"./utils\");\nexports.hostPlatform = (() => {\n  const platform = os.platform();\n  if (platform === \"darwin\") {\n    const macVersion = child_process_1\n      .execSync(\"sw_vers -productVersion\", {\n        stdio: [\"ignore\", \"pipe\", \"ignore\"],\n      })\n      .toString(\"utf8\")\n      .trim()\n      .split(\".\")\n      .slice(0, 2)\n      .join(\".\");\n    let arm64 = false;\n    if (!macVersion.startsWith(\"10.\")) {\n      arm64 =\n        child_process_1\n          .execSync(\"sysctl -in hw.optional.arm64\", {\n            stdio: [\"ignore\", \"pipe\", \"ignore\"],\n          })\n          .toString()\n          .trim() === \"1\";\n    }\n    const archSuffix = arm64 ? \"-arm64\" : \"\";\n    return `mac${macVersion}${archSuffix}`;\n  }\n  if (platform === \"linux\") {\n    const ubuntuVersion = ubuntuVersion_1.getUbuntuVersionSync();\n    if (parseInt(ubuntuVersion, 10) <= 19) return \"ubuntu18.04\";\n    return \"ubuntu20.04\";\n  }\n  if (platform === \"win32\") return os.arch() === \"x64\" ? \"win64\" : \"win32\";\n  return platform;\n})();\nfunction linuxLddDirectories(browserPath, browser) {\n  if (browser.name === \"chromium\")\n    return [path.join(browserPath, \"chrome-linux\")];\n  if (browser.name === \"firefox\") return [path.join(browserPath, \"firefox\")];\n  if (browser.name === \"webkit\") {\n    return [\n      path.join(browserPath, \"minibrowser-gtk\"),\n      path.join(browserPath, \"minibrowser-gtk\", \"bin\"),\n      path.join(browserPath, \"minibrowser-gtk\", \"lib\"),\n      path.join(browserPath, \"minibrowser-wpe\"),\n      path.join(browserPath, \"minibrowser-wpe\", \"bin\"),\n      path.join(browserPath, \"minibrowser-wpe\", \"lib\"),\n    ];\n  }\n  return [];\n}\nexports.linuxLddDirectories = linuxLddDirectories;\nfunction windowsExeAndDllDirectories(browserPath, browser) {\n  if (browser.name === \"chromium\")\n    return [path.join(browserPath, \"chrome-win\")];\n  if (browser.name === \"firefox\") return [path.join(browserPath, \"firefox\")];\n  if (browser.name === \"webkit\") return [browserPath];\n  return [];\n}\nexports.windowsExeAndDllDirectories = windowsExeAndDllDirectories;\nfunction executablePath(browserPath, browser) {\n  let tokens;\n  if (browser.name === \"chromium\") {\n    tokens = new Map([\n      [\"ubuntu18.04\", [\"chrome-linux\", \"chrome\"]],\n      [\"ubuntu20.04\", [\"chrome-linux\", \"chrome\"]],\n      [\n        \"mac10.13\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\n        \"mac10.14\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\n        \"mac10.15\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\n        \"mac11.0\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\n        \"mac11.0-arm64\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\n        \"mac11.1\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\n        \"mac11.1-arm64\",\n        [\"chrome-mac\", \"Chromium.app\", \"Contents\", \"MacOS\", \"Chromium\"],\n      ],\n      [\"win32\", [\"chrome-win\", \"chrome.exe\"]],\n      [\"win64\", [\"chrome-win\", \"chrome.exe\"]],\n    ]).get(exports.hostPlatform);\n  }\n  if (browser.name === \"firefox\") {\n    tokens = new Map([\n      [\"ubuntu18.04\", [\"firefox\", \"firefox\"]],\n      [\"ubuntu20.04\", [\"firefox\", \"firefox\"]],\n      [\"mac10.13\", [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"]],\n      [\"mac10.14\", [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"]],\n      [\"mac10.15\", [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"]],\n      [\"mac11.0\", [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"]],\n      [\n        \"mac11.0-arm64\",\n        [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"],\n      ],\n      [\"mac11.1\", [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"]],\n      [\n        \"mac11.1-arm64\",\n        [\"firefox\", \"Nightly.app\", \"Contents\", \"MacOS\", \"firefox\"],\n      ],\n      [\"win32\", [\"firefox\", \"firefox.exe\"]],\n      [\"win64\", [\"firefox\", \"firefox.exe\"]],\n    ]).get(exports.hostPlatform);\n  }\n  if (browser.name === \"webkit\") {\n    tokens = new Map([\n      [\"ubuntu18.04\", [\"pw_run.sh\"]],\n      [\"ubuntu20.04\", [\"pw_run.sh\"]],\n      [\"mac10.13\", undefined],\n      [\"mac10.14\", [\"pw_run.sh\"]],\n      [\"mac10.15\", [\"pw_run.sh\"]],\n      [\"mac11.0\", [\"pw_run.sh\"]],\n      [\"mac11.0-arm64\", [\"pw_run.sh\"]],\n      [\"mac11.1\", [\"pw_run.sh\"]],\n      [\"mac11.1-arm64\", [\"pw_run.sh\"]],\n      [\"win32\", [\"Playwright.exe\"]],\n      [\"win64\", [\"Playwright.exe\"]],\n    ]).get(exports.hostPlatform);\n  }\n  return tokens ? path.join(browserPath, ...tokens) : undefined;\n}\nexports.executablePath = executablePath;\nfunction cacheDirectory() {\n  const platform = os.platform();\n  if (platform === \"linux\")\n    return process.env.XDG_CACHE_HOME || path.join(os.homedir(), \".cache\");\n  if (platform === \"darwin\")\n    return path.join(os.homedir(), \"Library\", \"Caches\");\n  if (platform === \"win32\")\n    return (\n      process.env.LOCALAPPDATA || path.join(os.homedir(), \"AppData\", \"Local\")\n    );\n  throw new Error(\"Unsupported platform: \" + platform);\n}\nconst defaultBrowsersPath = (() => {\n  const envDefined = process.env.PLAYWRIGHT_BROWSERS_PATH;\n  // const envDefined = utils_1.getFromENV(\"PLAYWRIGHT_BROWSERS_PATH\");\n  if (envDefined === \"0\") return undefined;\n  return envDefined || path.join(cacheDirectory(), \"ms-playwright\");\n})();\nfunction browsersPath(packagePath) {\n  return defaultBrowsersPath || path.join(packagePath, \".local-browsers\");\n}\nexports.browsersPath = browsersPath;\nfunction browserDirectory(browsersPath, browser) {\n  return path.join(browsersPath, `${browser.name}-${browser.revision}`);\n}\nexports.browserDirectory = browserDirectory;\nfunction markerFilePath(browsersPath, browser) {\n  return path.join(\n    browserDirectory(browsersPath, browser),\n    \"INSTALLATION_COMPLETE\"\n  );\n}\nexports.markerFilePath = markerFilePath;\nfunction isBrowserDirectory(browserPath) {\n  const baseName = path.basename(browserPath);\n  return (\n    baseName.startsWith(\"chromium-\") ||\n    baseName.startsWith(\"firefox-\") ||\n    baseName.startsWith(\"webkit-\")\n  );\n}\nexports.isBrowserDirectory = isBrowserDirectory;\n//# sourceMappingURL=browserPaths.js.map\n","\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getUbuntuVersionSync = exports.getUbuntuVersion = void 0;\nconst fs = require(\"fs\");\nconst os = require(\"os\");\nconst util = require(\"util\");\nconst readFileAsync = util.promisify(fs.readFile.bind(fs));\nasync function getUbuntuVersion() {\n    if (os.platform() !== 'linux')\n        return '';\n    const osReleaseText = await readFileAsync('/etc/os-release', 'utf8').catch(e => '');\n    if (!osReleaseText)\n        return '';\n    return getUbuntuVersionInternal(osReleaseText);\n}\nexports.getUbuntuVersion = getUbuntuVersion;\nfunction getUbuntuVersionSync() {\n    if (os.platform() !== 'linux')\n        return '';\n    try {\n        const osReleaseText = fs.readFileSync('/etc/os-release', 'utf8');\n        if (!osReleaseText)\n            return '';\n        return getUbuntuVersionInternal(osReleaseText);\n    }\n    catch (e) {\n        return '';\n    }\n}\nexports.getUbuntuVersionSync = getUbuntuVersionSync;\nfunction getUbuntuVersionInternal(osReleaseText) {\n    const fields = new Map();\n    for (const line of osReleaseText.split('\\n')) {\n        const tokens = line.split('=');\n        const name = tokens.shift();\n        let value = tokens.join('=').trim();\n        if (value.startsWith('\"') && value.endsWith('\"'))\n            value = value.substring(1, value.length - 1);\n        if (!name)\n            continue;\n        fields.set(name.toLowerCase(), value);\n    }\n    if (!fields.get('name') || fields.get('name').toLowerCase() !== 'ubuntu')\n        return '';\n    return fields.get('version_id') || '';\n}\n//# sourceMappingURL=ubuntuVersion.js.map","'use strict'\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, '__esModule', { value: true })\nexports.createGuid = exports.calculateSha1 = exports.monotonicTime = exports.headersArrayToObject = exports.headersObjectToArray = exports.mkdirIfNeeded = exports.getAsBooleanFromENV = exports.getFromENV = exports.isUnderTest = exports.setUnderTest = exports.isDebugMode = exports.isError = exports.isObject = exports.isRegExp = exports.isString = exports.debugAssert = exports.assert = exports.makeWaitForNextTask = void 0\nconst path = require('path')\nconst fs = require('fs')\nconst util = require('util')\nconst crypto = require('crypto')\nconst mkdirAsync = util.promisify(fs.mkdir.bind(fs))\n// See https://joel.tools/microtasks/\nfunction makeWaitForNextTask() {\n  if (parseInt(process.versions.node, 10) >= 11) return setImmediate\n  // Unlike Node 11, Node 10 and less have a bug with Task and MicroTask execution order:\n  // - https://github.com/nodejs/node/issues/22257\n  //\n  // So we can't simply run setImmediate to dispatch code in a following task.\n  // However, we can run setImmediate from-inside setImmediate to make sure we're getting\n  // in the following task.\n  let spinning = false\n  const callbacks = []\n  const loop = () => {\n    const callback = callbacks.shift()\n    if (!callback) {\n      spinning = false\n      return\n    }\n    setImmediate(loop)\n    // Make sure to call callback() as the last thing since it's\n    // untrusted code that might throw.\n    callback()\n  }\n  return (callback) => {\n    callbacks.push(callback)\n    if (!spinning) {\n      spinning = true\n      setImmediate(loop)\n    }\n  }\n}\nexports.makeWaitForNextTask = makeWaitForNextTask\nfunction assert(value, message) {\n  if (!value) throw new Error(message)\n}\nexports.assert = assert\nfunction debugAssert(value, message) {\n  if (isUnderTest() && !value) throw new Error(message)\n}\nexports.debugAssert = debugAssert\nfunction isString(obj) {\n  return typeof obj === 'string' || obj instanceof String\n}\nexports.isString = isString\nfunction isRegExp(obj) {\n  return (\n    obj instanceof RegExp ||\n    Object.prototype.toString.call(obj) === '[object RegExp]'\n  )\n}\nexports.isRegExp = isRegExp\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}\nexports.isObject = isObject\nfunction isError(obj) {\n  return (\n    obj instanceof Error ||\n    (obj && obj.__proto__ && obj.__proto__.name === 'Error')\n  )\n}\nexports.isError = isError\nconst isInDebugMode = !!getFromENV('PWDEBUG')\nfunction isDebugMode() {\n  return isInDebugMode\n}\nexports.isDebugMode = isDebugMode\nlet _isUnderTest = false\nfunction setUnderTest() {\n  _isUnderTest = true\n}\nexports.setUnderTest = setUnderTest\nfunction isUnderTest() {\n  return _isUnderTest\n}\nexports.isUnderTest = isUnderTest\nfunction getFromENV(name) {\n  let value = process.env[name]\n  value =\n    value === undefined\n      ? process.env[`npm_config_${name.toLowerCase()}`]\n      : value\n  value =\n    value === undefined\n      ? process.env[`npm_package_config_${name.toLowerCase()}`]\n      : value\n  return value\n}\nexports.getFromENV = getFromENV\nfunction getAsBooleanFromENV(name) {\n  const value = getFromENV(name)\n  return !!value && value !== 'false' && value !== '0'\n}\nexports.getAsBooleanFromENV = getAsBooleanFromENV\nasync function mkdirIfNeeded(filePath) {\n  // This will harmlessly throw on windows if the dirname is the root directory.\n  await mkdirAsync(path.dirname(filePath), { recursive: true }).catch(() => {})\n}\nexports.mkdirIfNeeded = mkdirIfNeeded\nfunction headersObjectToArray(headers) {\n  const result = []\n  for (const name in headers) {\n    if (!Object.is(headers[name], undefined))\n      result.push({ name, value: headers[name] })\n  }\n  return result\n}\nexports.headersObjectToArray = headersObjectToArray\nfunction headersArrayToObject(headers, lowerCase) {\n  const result = {}\n  for (const { name, value } of headers)\n    result[lowerCase ? name.toLowerCase() : name] = value\n  return result\n}\nexports.headersArrayToObject = headersArrayToObject\nfunction monotonicTime() {\n  const [seconds, nanoseconds] = process.hrtime()\n  return seconds * 1000 + ((nanoseconds / 1000) | 0) / 1000\n}\nexports.monotonicTime = monotonicTime\nfunction calculateSha1(buffer) {\n  const hash = crypto.createHash('sha1')\n  hash.update(buffer)\n  return hash.digest('hex')\n}\nexports.calculateSha1 = calculateSha1\nfunction createGuid() {\n  return crypto.randomBytes(16).toString('hex')\n}\nexports.createGuid = createGuid\n// # sourceMappingURL=utils.js.map\n","module.exports = require(\"child_process\");;","module.exports = require(\"console-browserify\");;","module.exports = require(\"crypto\");;","module.exports = require(\"events\");;","module.exports = require(\"extract-zip\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"https-proxy-agent\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"playwright-core\");;","module.exports = require(\"process/browser\");;","module.exports = require(\"progress\");;","module.exports = require(\"proper-lockfile\");;","module.exports = require(\"proxy-from-env\");;","module.exports = require(\"rimraf\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./src/index.js\");\n"],"sourceRoot":""}